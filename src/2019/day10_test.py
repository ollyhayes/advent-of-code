import os
import pytest
from day10 import compute_part_1, compute_part_2
from typing import List, Tuple, Dict, Set, Callable, Optional, Union, Protocol

t1 = """......#.#.
#..#.#....
..#######.
.#.#.###..
.#..#.....
..#....#.#
#..#....#.
.##.#..###
##...#..#.
.#....####""", (5,8), 33

t2 = """#.#...#.#.
.###....#.
.#....#...
##.#.#.#.#
....#.#.#.
.##..###.#
..#...##..
..##....##
......#...
.####.###.""", (1,2), 35

t3 = """.#..#..###
####.###.#
....###.#.
..###.##.#
##.##.#.#.
....###..#
..#.#..#.#
#..#.#.###
.##...##.#
.....#.#..""", (6,3), 41

t4 = """.#..##.###...#######
##.############..##.
.#.######.########.#
.###.#######.####.#.
#####.##.#.##.###.##
..#####..#.#########
####################
#.####....###.#.#.##
##.#################
#####.##.###..####..
..######..##.#######
####.##.####...##..#
.#####..#.######.###
##...#.##########...
#.##########.#######
.####.#.###.###.#.##
....##.##.###..#####
.#.#.###########.###
#.#.#.#####.####.###
###.##.####.##.#..##""", (11,13), 210

@pytest.mark.parametrize(
	("field", "best_position", "astroids_detected"),
	( t1, t2, t3, t4 )
)
def test_part_1(field: str, best_position: Tuple[int, int], astroids_detected: int) -> None:
	assert compute_part_1(field) == (best_position, astroids_detected)

@pytest.mark.parametrize(
	("field", "nth_asteroid", "best_position"),
	(
		(t4[0], 1, (11,12)),
		(t4[0], 2, (12,1)),
		(t4[0], 3, (12,2)),
		(t4[0], 10, (12,8)),
		(t4[0], 20, (16,0)),
		(t4[0], 50, (16,9)),
		(t4[0], 100, (10,16)),
		(t4[0], 199, (9,6)),
		(t4[0], 200, (8,2)),
		(t4[0], 201, (10,9)),
		(t4[0], 299, (11,1)),
	)
)
def test_part_2(field: str, nth_asteroid: int, best_position: Tuple[int, int]) -> None:
	assert compute_part_2(field, 11, 13, nth_asteroid) == best_position